<!DOCTYPE html>
<html id="top">
  <head>
    <meta charset="utf-8">
    <title>The Crosswalk Project</title>
    <link rel="shorcut icon" href="/assets/favicon.ico" type="image/x-icon" />
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon" />
    <script>
      WebFontConfig = {
        custom: {
          families: ['Clear Sans'],
          urls: ['/css/fonts.css']
        },
        google: {
          families: ['Source Code Pro:n4,n6']
        },
        timeout: 2000
      };
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script async defer src="//ajax.googleapis.com/ajax/libs/webfont/1.5.3/webfont.js"></script>
    <link rel="stylesheet" href="/css/main.css">

    <meta name="description" content="Enable the most advanced web innovations with the Crosswalk Project web runtime to develop powerful Android and Cordova apps." />
    <meta name="author" content="Crosswalk" />
    <meta name="handheldfriendly" content="true" />
    <meta name="mobileoptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="cleartype" content="on" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <!-- Facebook -->
    <meta property="og:side_name" content="Crosswalk" />
    <meta property="og:title" content="Crosswalk" />
    <meta property="og:url" content="http://crosswalk-project.org/documentation/apis/presentation_api_tutorial" />
    <meta property="og:description" content="Enable the most advanced web innovations with the Crosswalk Project web runtime to develop powerful Android and Cordova apps." />
    <meta property="og:image" content="/assets/crosswalk-og-banner.jpg" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:url" content="http://crosswalk-project.org/documentation/apis/presentation_api_tutorial" />
    <meta name="twitter:title" content="Crosswalk" />
    <meta name="twitter:description" content="Enable the most advanced web innovations with the Crosswalk Project web runtime to develop powerful Android and Cordova apps." />
    <meta name="twitter:site" content="@xwalk_project" />

    <!-- Relevant original Crosswalk Project JS -->
    <script src="/js/utils.js"></script>
    <script src="/js/xwalk.js"></script>
    <script src="/js/versions.js"></script>
    <script src="/js/demos.js"></script>
    <script src="/js/testimonials.js"></script>
    <script src="/js/tools.js"></script>
    <script src="/js/qualityindicators.js"></script>
    <script src="/js/i18n.js"></script>
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script language="javascript" type="text/javascript">
      var style = document.createElement('style');
      style.type = "text/css";
      style.id = "antiClickjack";
      style.innerHTML = "body{display:none !important;}";
      if (self === top) {
        var antiClickjack = document.getElementById("antiClickjack");
        antiClickjack.parentNode.removeChild(antiClickjack);
      } else {
        top.location = self.location;
      }
    </script>

  </head>
  <body>
    <!-- If curr page named 'index' and less than 2 dirs deep,
         do custom layouts. (home screen, blog, app-mgmt page)
         Else, provide doc header and nav. -->
    
    <div class="container">
      <div class="doc-header">
        


  <div class="doc-logo-div">
     <a href="/" class="doc-logo-link">
       <img src="/assets/identity/crosswalkproject-logo-horizontal-dark.png" class="doc-logo-img">
     </a>
  </div>
  <div class="doc-nav-div">
    <ul class="doc-nav-list">
      <li class="doc-nav-item">
        <a href="/documentation/getting_started.html" class="doc-nav-link">Documentation</a>
      </li>
      <li class="doc-nav-item">
        <a href="/blog" class="doc-nav-link">Blog</a>
      </li>
      <li class="doc-nav-item hide-on-small">
        <a href="/contribute" class="doc-nav-link">Contribute</a>
      </li>
      <li class="doc-nav-item hide-on-small">
        <a href="https://github.com/crosswalk-project/crosswalk-website/wiki" class="doc-nav-link">Wiki</a>
      </li>
      <li class="doc-nav-item hide-on-small">
        <a href="/documentation/about/faq.html" class="doc-nav-link">FAQ</a>
      </li>
      <li class="doc-nav-item">
	<span class="i18n-label" id="i18n-label">
	  <span id="i18n-inner">
	    <img src="/assets/i18n-globe.png" class="i18n-globe" />
	    English
	    <img src="/assets/i18n-arrow.png" class="i18n-arrow"/>
	  </span>
	  <div id="i18n-menu" class="i18n-menu i18n-menu-light">
            <a onclick="switchLanguage('English')">English</a>
            <a onclick="switchLanguage('Chinese')">中文版</a>
	  </div>
	</span>
      </li>
    </ul>
  </div>
  

      </div>
      <br />
      <div class="doc-main">
        <div class="row">
          
          <div id="translation-missing-toaster">
  <p style="padding:10px"> 抱歉，该网页目前还不存在中文版本，请继续浏览其他网页！ </p>
</div>

          



<nav id="contents" class="article-toc nav-toggleContainer">
  <a href="#contents" id="contents-toggle" class="button button--small button--tertiary nav-toggle">Table of Contents</a>
  <a href="./#contents-toggle" class="button button--small button--tertiary nav-toggle--dummy">Table of Contents</a>
  <ul class="article-list nav-toggleHide">
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/about.html">About</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/getting_started.html">Getting Started</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/crosswalk-app-tools.html">Crosswalk App Tools</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/android.html">Android</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/ios.html">iOS</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/windows.html">Windows</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/linux.html">Linux</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/cordova.html">Cordova</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/tizen.html">Tizen</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/manifest.html">Manifest</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/apis.html">APIs</a>
        
            <ul class="article-list">
            
              <li class="article-item ">
                <a class="article-link" href="/documentation/apis/web_apis.html">Web APIs</a>
                
              </li>
            
              <li class="article-item ">
                <a class="article-link" href="/documentation/apis/embedding_api.html">Embedding API</a>
                
              </li>
            
            </ul>
          
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/downloads.html">Downloads</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/shared_mode.html">Shared Mode</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/download_mode.html">Download Mode</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/crosswalk_lite.html">Crosswalk Lite</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/tutorials.html">Tutorials</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/samples.html">Samples</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/community.html">Community</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/qa.html">Quality Assurance</a>
        
        </li>
    
  </ul>

</nav>

<article class="article article--hasToC">
  <h1>Presentation API Tutorial</h1><p>The Presentation API allows a web app to present web content on a secondary display connected to the device. It has several uses: presenting slides, sharing video and image, and playing game on a large screen TV via the mobile device.</p>
<p>Presentation API is an experimental feature for Crosswalk for Android 4.2+ based on Miracast-compatible wireless display support. It is available in <a href="https://crosswalk-project.org/documentation/downloads.html">current versions</a> of Crosswalk.  This tutorial is based on an article from <a href="http://html5hub.com/presentation-api-tutorial/">HTML5 Hub</a> by Hongbo Min, and has been tested with <a href="https://crosswalk-project.org/documentation/downloads.html">Crosswalk Stable 11.40.277.7</a>.</p>
<p>The Presentation API is defined as follows:</p>
<pre><code>interface Presentation :EventTarget {
       void requestShow(DOMString url, successCallback, errorCallback);
       readonly attribute boolean displayAvailable;
       attributeEventHandler ondisplayavailablechange;
};</code></pre><p>In Crosswalk, the Presentation API is exposed as an additional property to the navigator object:</p>
<pre><code>navigator.presentation.requestShow
navigator.presentation.displayAvailable
navigator.presentation.displayavailablechange</code></pre><p>Note: the <a href="http://w3c.github.io/presentation-api/">Presentation API W3C spec</a> is still evolving, and may be modified to meet new usage scenarios, such as integration with Chromecast devices.</p>
<h2>Setup Wireless Display</h2><p><strong>Requirements</strong></p>
<ol>
<li>Android 4.2 or newer device with Miracast protocol support.</li>
<li>A TV or display with an HDMI port.</li>
<li>A Miracast certified wireless display adapter, for example the Netgear PTV3000 (tested)</li>
<li>Plug the wireless display adapter into the display’s HDMI port.</li>
<li>On the Android device, open the ‘Settings’ app and select the ‘Display’ entry.</li>
<li>Turn on ‘Wireless display’ to connect to the available wireless display.</li>
</ol>
<p><strong>Alertnative: no wireless display</strong></p>
<p>If you do not have a wireless display adapter but are willing to run the application on your device, Android gives you the option to use a simulated secondary display for testing purposes. This simulated display appears as an overlay on your device screen. To enable it:</p>
<ol>
<li>Open the <code>Settings</code> app and select <code>Developer Options</code>.</li>
<li>Use the <code>Simulate Secondary Display</code> option to select a display to simulate. </li>
</ol>
<h2>Sample Code</h2><p>In the following sample, there are two HTML files:</p>
<ul>
<li><code>index.html</code> – a controller page which shows on the primary display and opens a page on the secondary display</li>
<li><code>content.html</code> – the content page to show on the secondary display</li>
</ul>
<p><strong>index.html</strong></p>
<pre><code>&lt;!DOCTYPE html&gt;

&lt;html&gt;
&lt;head&gt;
&lt;script&gt;
var presentationWindow = null;

function onsuccess(w) {
  presentationWindow = w;
  w.postMessage(&quot;Hello from the primary display&quot;, &quot;*&quot;);
}

function onerror(error) {
  alert(&quot;Failed to requestShow: &quot; + error.name);
}

function showPresentation() {
  if (!navigator.presentation.displayAvailable) {
    alert(&quot;No available display found.&quot;);
    return;
  }

  navigator.presentation.addEventListener(&quot;displayavailablechange&quot;, function() {
    if (!navigator.presentation.displayAvailable)
      presentationWindow = null;
  });
  navigator.presentation.requestShow(&quot;content.html&quot;, onsuccess, onerror);
}

window.addEventListener(&quot;message&quot;, function(event) {
  var msg = event.data;

  var elem = document.getElementById(“msg”);

  elem.innerHTML= ”Message from secondary display: ” + msg;
});
&lt;/script&gt;
&lt;/head&gt;
  &lt;body&gt;
  &lt;input type=&quot;button&quot; onclick=&quot;showPresentation();&quot; value=”Show Presentation”&gt;
  &lt;/input&gt;

  &lt;div id=”msg”&gt;Error: No message from primary display&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre><p><strong>content.html</strong></p>
<pre><code>&lt;html&gt;
&lt;head&gt;
  &lt;script&gt;
   window.addEventListener(&quot;message&quot;, function(event) {
     var msg = event.data;
     var elem = document.getElementById(“output”);
     elem.innerHTML = msg;
     event.source.postMessage(&quot;Hello from the secondary display&quot;, &quot;*&quot;);
   });
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  Message from its opener:
  &lt;div id=”output”&gt;Error: No message received from secondary dispaly&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre><p>Follow the instructions on <a href="/documentation/android/build_an_application.html">how to build a Crosswalk application</a> to package the above two HTML files into an Android application; then follow the instructions for <a href="/documentation/android/run_on_android.html">running on Android</a> to launch the application on a Android 4.2+ device. Make sure there is at least one available secondary display before running the application: see the Setup Wireless Display section above.</p>
<p>Once the application is running, clicking the “Show Presentation” button will open the <code>content.html</code> page on the secondary display.</p>
<p>You should see the following output on the primary display:</p>
<blockquote>
<p>Hello from the secondary display</p>
</blockquote>
<p>and this output on the secondary display:</p>
<blockquote>
<p>Hello from the primary display</p>
</blockquote>
<p>If there is no available wireless display, you will get an alert dialog with the message “No available display found”.</p>
<p>For an example of a more realistic HTML5 app using a secondary display, check out the <a href="https://github.com/crosswalk-project/crosswalk-demos/tree/master/Gallery">ImageGallery</a> demo. This demonstrates how to use the Presentation API to view photos on a wireless display.</p>
<h3>Details of the JavaScript API</h3><p>####<code>presentation.requestShow Method</code>####</p>
<p><code>requestShow</code> sends a request to the user agent to show a presentation. If a secondary display is ready for use, a new presentation window for the HTML page specified by the url will be opened on the secondary display. This secondary window is opened from the current browsing context. Once the page has finished loading, the <code>successCallback</code> method is invoked with the window object of the new page as the input parameter. Thus, the communication between the opener window and presentation window follows the approach of <a href="http://www.w3.org/TR/webmessaging/">HTML5 Web Messaging</a>. You can call <code>postMessage</code> to post a message and register an <code>onmessage</code> event listener to handle the message from the other side.</p>
<p>If an error occurs, <code>requestShow</code> will fail and the <code>errorCallback</code> method is called with a DOMError object. The following table describes the possible errors:</p>
<table>
<tr><th>Error Name</th><th>Description</th></tr>
<tr><td>NotFoundError</td><td>No available secondary display found</td></tr>
<tr><td>InvalidAccessError</td><td>A presentation is already showing on the secondary display</td></tr>
<tr><td>NotSupportedError</td><td>The platform doesn't support the Miracast protocol</td></tr>
<tr><td>InvalidParameterError</td><td>An invalid url parameter was passed</td></tr>
</table>

<p>Note:  Since there is no input channel on the secondary display, we recommend:</p>
<ol>
<li>Design an easy-to-read user interface for a large display.</li>
<li>Avoid JavaScript dialogs (e.g. alert and confirm).</li>
<li>Do not expect click, touch or keyboard events or interaction in the presentation page context.</li>
</ol>
<p>####<code>presentation.displayAvailable Property</code>####</p>
<p>The <code>presentation.displayAvailable</code> property is true if there is at least one secondary display available for showing a presentation; otherwise, it is false. When one secondary display is disconnected:</p>
<ol>
<li>If it is not the only secondary display connected to the device, the page content will be switched to the next available display automatically.</li>
<li>If it is the only secondary display, the page content is disposed of and the <code>displayAvailable</code> property is set to false.</li>
</ol>
<p>####<code>presentation.displayavailablechange Event</code>####</p>
<p>The <code>displayavailablechange</code> event is fired when the first secondary display becomes available or the last secondary display is removed. The property of <code>displayAvailable</code> will also be updated to true or false (see above).</p>
<p>The presentation browsing context is closed if the secondary display becomes unavailable. The app does not need to close it.</p>
<h3>Summary</h3><p>In this tutorial, we introduced a new W3C Presentation API for presenting web content on a secondary display. Currently, it is an experimental feature implemented in Crosswalk for Android 4.2+ devices.  It may be changed in the future as it evolves based on feedback from the community.</p>
<h3>Resources</h3><p>Here are a few related links:</p>
<ul>
<li><a href="http://w3c.github.io/presentation-api/">W3C Presentation API Draft</a></li>
<li><a href="http://www.w3.org/community/webscreens/">Second Screen Presentation Community Group</a></li>
<li><a href="http://lists.w3.org/Archives/Public/public-webscreens/">Web Screens Mail List</a></li>
</ul>
  <footer class="article-next">
    



  
  
    
    
  
    
    
  
    
    
  
    
    
  


  </footer>
</article>

          
        </div>
      </div>
    </div>
    

    
 
  <hr class="footer-divider" style="margin-top:125px; margin-bottom:0px" />
    <div style="position:relative; top:-30px;">
       <a href="/"><img src="/assets/cw-logo-circle.png" width="60px" style="display:block; margin: 0 auto;" /></a>
    </div>
    <footer class="footer footer--documentation" >
      <div class="container" >
        <div class="row">
          <div  class="footer-div" language="en">
          <img src="/assets/Twitter_logo_blue.png" width="20px" /> Follow  <a href="http://twitter.com/xwalk_project">@xwalk_project on Twitter</a> for the latest developer activities and project updates.
          </div>
           <div  class="footer-div" language="zh" style="display:none">
           <img src="/assets/Sina_Weibo_Blue.png" width="60px" /> 参考<a href="http://weibo.com/crosswalk">微博</a> 最新的开发者活动或者更新。
          </div>
          <div class="footer-div">
             Latest blog post:</br>
              
              
                <b><a href="/blog">Crosswalk 23 to be the last Crosswalk release</a></b><br/>
                &nbsp;(<span ><time class="js-vagueTime" datetime="Fri, 10 Feb 2017 13:30:00 GMT">2017-02-10T09:30</time></span>)
              
              <br/>
           </div>
          <div class="footer-div">
              <strong><a href="/feed.xml"><img src="/assets/rss-icon-16.gif" style="vertical-align:middle" /> RSS Feed</a></strong>
          </div>
          <div class="footer-div">
             <a href="/documentation/getting_started.html"> Documentation</a> &nbsp;
             <a href="/blog"> Blog</a> &nbsp;
             <a href="/documentation/downloads.html"> Downloads</a> <br />
             <a href="https://crosswalk-project.org/jira/secure/Dashboard.jspa"> Issues</a> &nbsp;
             <a href="https://github.com/crosswalk-project"> GitHub Source</a> &nbsp;
             <a href="/sitemap.html">Sitemap</a> <br/>
          </div>
        </div>
        <div class="row">
            <small>
              The Crosswalk Project was created by the Intel Open Source Technology Center. Copyright © 2013–2016 Intel Corporation. All right reserved. <a href="https://github.com/crosswalk-project/crosswalk-website/wiki/Privacy-Policy">  Privacy policy </a>  *Other names and brands may be claimed as the property of others.
            </small>
        </div>
      </div>
    </footer>
<script>
    $("[language=en]").css("display","none");
    $("[language=en]").css("display","block");
</script>

    
    
      <!-- Google Tag Manager -->
      <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-WC843Q"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-WC843Q');</script>
      <!-- End Google Tag Manager -->
    
    <script src="/js/smoothScroll.js"></script>
    <script src="/js/vagueTime.js"></script>
    <!-- <script async defer src="/js/trmix.js"></script> -->
  </body>
</html>
