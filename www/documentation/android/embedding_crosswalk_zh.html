<!DOCTYPE html>
<html id="top">
  <head>
    <meta charset="utf-8">
    <title>The Crosswalk Project</title>
    <link rel="shorcut icon" href="/assets/favicon.ico" type="image/x-icon" />
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon" />
    <script>
      WebFontConfig = {
        custom: {
          families: ['Clear Sans'],
          urls: ['/css/fonts.css']
        },
        google: {
          families: ['Source Code Pro:n4,n6']
        },
        timeout: 2000
      };
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script async defer src="//ajax.googleapis.com/ajax/libs/webfont/1.5.3/webfont.js"></script>
    <link rel="stylesheet" href="/css/main.css">

    <meta name="description" content="Enable the most advanced web innovations with the Crosswalk Project web runtime to develop powerful Android and Cordova apps." />
    <meta name="author" content="Crosswalk" />
    <meta name="handheldfriendly" content="true" />
    <meta name="mobileoptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="cleartype" content="on" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <!-- Facebook -->
    <meta property="og:side_name" content="Crosswalk" />
    <meta property="og:title" content="Crosswalk嵌入模式" />
    <meta property="og:url" content="http://crosswalk-project.org/documentation/android/embedding_crosswalk_zh" />
    <meta property="og:description" content="Enable the most advanced web innovations with the Crosswalk Project web runtime to develop powerful Android and Cordova apps." />
    <meta property="og:image" content="/assets/crosswalk-og-banner.jpg" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:url" content="http://crosswalk-project.org/documentation/android/embedding_crosswalk_zh" />
    <meta name="twitter:title" content="Crosswalk嵌入模式" />
    <meta name="twitter:description" content="Enable the most advanced web innovations with the Crosswalk Project web runtime to develop powerful Android and Cordova apps." />
    <meta name="twitter:site" content="@xwalk_project" />

    <!-- Relevant original Crosswalk Project JS -->
    <script src="/js/utils.js"></script>
    <script src="/js/xwalk.js"></script>
    <script src="/js/versions.js"></script>
    <script src="/js/demos.js"></script>
    <script src="/js/testimonials.js"></script>
    <script src="/js/tools.js"></script>
    <script src="/js/qualityindicators.js"></script>
    <script src="/js/i18n.js"></script>
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script language="javascript" type="text/javascript">
      var style = document.createElement('style');
      style.type = "text/css";
      style.id = "antiClickjack";
      style.innerHTML = "body{display:none !important;}";
      if (self === top) {
        var antiClickjack = document.getElementById("antiClickjack");
        antiClickjack.parentNode.removeChild(antiClickjack);
      } else {
        top.location = self.location;
      }
    </script>

  </head>
  <body>
    <!-- If curr page named 'index' and less than 2 dirs deep,
         do custom layouts. (home screen, blog, app-mgmt page)
         Else, provide doc header and nav. -->
    
    <div class="container">
      <div class="doc-header">
        


  <div class="doc-logo-div">
     <a href="/index_zh.html" class="doc-logo-link">
       <img src="/assets/identity/crosswalkproject-logo-horizontal-dark.png" class="doc-logo-img">
     </a>
  </div>
  <div class="doc-nav-div">
    <ul class="doc-nav-list">
      <li class="doc-nav-item">
        <a href="/documentation/getting_started_zh.html" class="doc-nav-link">文档</a>
      </li>
      <li class="doc-nav-item">
        <a href="/blog/index_zh.html" class="doc-nav-link">博客</a>
      </li>
      <li class="doc-nav-item hide-on-small">
        <a href="/contribute/index_zh.html" class="doc-nav-link">贡献</a>
      </li>
      <li class="doc-nav-item hide-on-small">
        <a href="https://github.com/crosswalk-project/crosswalk-website/wiki" class="doc-nav-link">维基</a>
      </li>
      <li class="doc-nav-item hide-on-small">
        <a href="/documentation/about/faq_zh.html" class="doc-nav-link">常见问题</a>
      </li>
      <li class="doc-nav-item">
	<span class="i18n-label" id="i18n-label">
	  <span id="i18n-inner">
	    <img src="/assets/i18n-globe.png" class="i18n-globe" />
	    中文版
	    <img src="/assets/i18n-arrow.png" class="i18n-arrow"/>
	  </span>
	  <div id="i18n-menu" class="i18n-menu i18n-menu-light">
            <a onclick="switchLanguage('English')">English</a>
            <a onclick="switchLanguage('Chinese')">中文版</a>
	  </div>
	</span>
      </li>
    </ul>
  </div>
  

      </div>
      <br />
      <div class="doc-main">
        <div class="row">
          
          <div id="translation-missing-toaster">
  <p style="padding:10px"> 抱歉，该网页目前还不存在中文版本，请继续浏览其他网页！ </p>
</div>

          



<nav id="contents" class="article-toc nav-toggleContainer">
  <a href="#contents" id="contents-toggle" class="button button--small button--tertiary nav-toggle">Table of Contents</a>
  <a href="./#contents-toggle" class="button button--small button--tertiary nav-toggle--dummy">Table of Contents</a>
  <ul class="article-list nav-toggleHide">
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/about_zh.html">关于</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/getting_started_zh.html">开始</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/crosswalk-app-tools_zh.html">Crosswalk App Tools</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/android_zh.html">Android</a>
        
            <ul class="article-list">
            
              <li class="article-item ">
                <a class="article-link" href="/documentation/android/system_setup_zh.html">系统设置</a>
                
              </li>
            
              <li class="article-item ">
                <a class="article-link" href="/documentation/android/build_an_application_zh.html">创建应用</a>
                
              </li>
            
              <li class="article-item ">
                <a class="article-link" href="/documentation/android/run_on_android_zh.html">运行在安卓平台</a>
                
              </li>
            
              <li class="article-item ">
                <a class="article-link" href="/documentation/android/android_remote_debugging_zh.html">远程调试</a>
                
              </li>
            
              <li class="article-item ">
                <a class="article-link" href="/documentation/android/deploy_to_android_store_zh.html">部署到Android Store</a>
                
              </li>
            
              <li class="article-item ">
                <a class="article-link" href="/documentation/android/android_64bit_zh.html">64-bit支持</a>
                
              </li>
            
              <li class="article-item ">
                <a class="article-link" href="/documentation/android/android_extensions_zh.html">安卓扩展程序</a>
                
              </li>
            
              <li class="article-item  nav-item--active">
                <a class="article-link" href="/documentation/android/embedding_crosswalk_zh.html">Crosswalk嵌入模式</a>
                
              </li>
            
            </ul>
          
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/ios_zh.html">iOS</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/windows_zh.html">Windows</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/linux_zh.html">Linux</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/cordova_zh.html">Cordova</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/manifest_zh.html">Manifest</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/apis_zh.html">API</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/shared_mode_zh.html">共享模式</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/download_mode_zh.html">下载模式</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/crosswalk_lite_zh.html">Crosswalk Lite</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/samples_zh.html">样例</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/community_zh.html">社区</a>
        
        </li>
    
        <li class="article-item ">
        <a class="article-link" href="/documentation/qa_zh.html">质量保证</a>
        
        </li>
    
  </ul>

</nav>

<article class="article article--hasToC">
  <h1>Crosswalk嵌入模式</h1><p>Crosswalk Embedding API允许您将Crosswalk runtime嵌入到应用中。在嵌入的rutime中，您可以加载一个网页，用法类似于安卓<a href="http://developer.android.com/guide/webapps/webview.html">WebView</a>。</p>
<p>当您的应用中有大量的Java代码，但是又想要使用Web技术来写UI界面时，我们才推荐您使用Embedding API。如果您仅仅希望打包您的Web应用到安卓平台，有两种方式可以选择：</p>
<ul>
<li><a href="/documentation/android/build_an_application_zh.html">使用Crosswalk默认的打包工具</a>来生成安卓应用包APK文件。</li>
<li><a href="/documentation/cordova_zh.html">使用带有Crosswalk的Cordova</a>：使用这种方式，您将可以使用标准的设备APIs，同时也可以使用先进的Web APIs，使用Web技术来编译您的应用。</li>
</ul>
<p>如果您需要使用Embedding API, 请参照下面的步骤：</p>
<h2>使用Embedding API创建应用</h2><p>本教程中叙述了如何使用嵌入式Crosswalk Webview来创建安卓应用。</p>
<p>在开始教程之前，您需要对安卓开发环境熟悉。因为通常是使用<a href="http://developer.android.com/tools/sdk/eclipse-adt.html">ADT</a>创建安卓应用，本教程也使用了这个工具；因此熟悉此工具将会非常有用。</p>
<p>教程中的所有步骤都已经在Linux (Fedora 20)平台上测试过，因此本教程也适用于其他平台和操作系统(比如Windows)。</p>
<p><strong>阅读完本教程</strong>，您将可以开发含有嵌入式Crosswalk runtime的安卓应用。</p>
<h3>配置开发主机以及目标机</h3><p>在使用Embedding API之前，请确保您已经<a href="/documentation/android/system_setup_zh.html">为主机配置过安卓开发环境</a>。</p>
<p>您也需要设置能够运行安卓应用的目标机，请参见<a href="/documentation/android/android_target_setup_zh.html">配置安卓目标机</a>页面。</p>
<p>由于教程使用了ADT，请确保您的主机上已经<a href="http://developer.android.com/tools/sdk/eclipse-adt.html">安装必要的ADT插件</a>。</p>
<h3>下载Crosswalk WebView Bundle</h3><p><button onclick="location.href = '/documentation/downloads_zh.html'">下载</button></p>
<p>下载Crosswalk WebView Bundle到开发机中。Webview Bundle包含一些在嵌入式Crosswalk应用中必须的库以及支持工具。注意WebView是区分CPU架构的，所以您可能需要编译出基于ARM,x64以及64位平台上的多个APK。</p>
<p>解压下载的<code>.zip</code>文件。</p>
<h3>导入Crosswalk Webview到ADT</h3><p>下一步是通过导入的解压文件Crosswalk Webview bundle,在ADT中创建一个工程。您可以参考下面的工程，编译属于您自己的Crosswalk嵌入模式应用。</p>
<p>创建工程：</p>
<ol>
<li><p>打开ADT。</p>
</li>
<li><p>然后选择<em>File</em> &gt; <em>New</em> &gt; <em>Project...</em>, <em>Android</em> &gt; <em>Android Project From Existing Code</em>。</p>
</li>
<li><p>设置<em>Root Directory</em>到解压的<code>crosswalk-webview/</code>目录下。</p>
</li>
<li><p>单击<em>Finish</em>。<strong>crosswalk-webview</strong>工程将会在<em>Package Explorer</em>中呈现出来。</p>
</li>
</ol>
<h3>用ADT创建安卓应用</h3><p>接下来，创建一个将会使用Crosswalk Embedding API的安卓应用。(依然在ADT中)：</p>
<ol>
  <li>
    <p>选择<em>File</em> &gt; <em>New</em> &gt; <em>Android Application Project</em>.</p>

<pre><code>&lt;p&gt;在&lt;em&gt;New Android Application&lt;/em&gt;弹出框中填入如下的类似内容：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;em&gt;Application Name:&lt;/em&gt; &lt;strong&gt;XWalkEmbed&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;Project Name:&lt;/em&gt; &lt;strong&gt;XWalkEmbed&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;Package Name:&lt;/em&gt; &lt;strong&gt;org.crosswalkproject.xwalkembed&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;Minimum Required SDK:&lt;/em&gt; &lt;strong&gt;API 14&lt;/strong&gt; (Crosswalk支持的最低版本)&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;Target SDK:&lt;/em&gt; &lt;strong&gt;API 19&lt;/strong&gt; (或者您环境中有的版本)&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;Compile With:&lt;/em&gt; &lt;strong&gt;API 19&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;Theme:&lt;/em&gt; &lt;strong&gt;None&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如下图所示：&lt;/p&gt;

&lt;img src=&quot;/assets/embedding-api-app1.png&quot;&gt;

&lt;p&gt;点击&lt;em&gt;Next&lt;/em&gt;.&lt;/p&gt;</code></pre>  </li>

  <li>
    <p>在<em>Configure Project</em> 面板中, 设置如下：</p>

<pre><code>&lt;ul&gt;
  &lt;li&gt;不打钩&lt;em&gt;Create custom launcher icon&lt;/em&gt;.&lt;/li&gt;
  &lt;li&gt;打钩&lt;em&gt;Create activity&lt;/em&gt;.&lt;/li&gt;
  &lt;li&gt;不打钩 &lt;em&gt;Mark this project as a library&lt;/em&gt;.&lt;/li&gt;
  &lt;li&gt;打钩create the project或者选择系统中其他路径。Add to working sets可以随意。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;结果如下图所示：&lt;/p&gt;

&lt;img src=&quot;/assets/embedding-api-app2.png&quot;&gt;

&lt;p&gt;点击&lt;em&gt;Next&lt;/em&gt;.&lt;/p&gt;</code></pre>  </li>

  <li>
    <p>在<em>Create Activity</em>面板中, 选择<em>Create Activity</em>和<em>Blank Activity</em>:</p>

<pre><code>&lt;img src=&quot;/assets/embedding-api-app3.png&quot;&gt;

&lt;p&gt;点击 &lt;em&gt;Next&lt;/em&gt;.&lt;/p&gt;</code></pre>  </li>

  <li>
    <p>在<em>Blank Activity</em>中填入如下类似内容：</p>

<pre><code>&lt;ul&gt;
  &lt;li&gt;&lt;em&gt;Activity Name:&lt;/em&gt; &lt;strong&gt;MainActivity&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;Layout Name:&lt;/em&gt; &lt;strong&gt;activity_main&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;Fragment Layout Name:&lt;/em&gt; &lt;strong&gt;fragment_main&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;Navigation Type:&lt;/em&gt; &lt;strong&gt;none&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;结果如下图所示：&lt;/p&gt;

&lt;img src=&quot;/assets/embedding-api-app4.png&quot;&gt;

&lt;p&gt;点击&lt;em&gt;Finish&lt;/em&gt;.&lt;/p&gt;</code></pre>  </li>
</ol>

<p>您的工程现在已经可以工作了。</p>
<h3>在工程中引用Crosswalk Webview</h3><p>下一步是添加Crosswalk Webview到您的应用工程中</p>
<p>具体如下(在ADT)：</p>
<ol>
<li><p>右键点击<em>Package Explorer</em>并选择<em>Properties</em>.</p>
</li>
<li><p>选择<em>Android</em>。</p>
</li>
<li><p>在<em>Library</em>下，点击<em>Add</em>。选择<strong>crosswalk-webview-${XWALK-BETA-ANDROID-X86}-x86</strong>并点击OK。</p>
</li>
</ol>
<p>点击Ok。</p>
<p>您的工程就可以链接到Crosswalk Webview。</p>
<h3><a class="doc-anchor" id="Add-code-to-integrate-the-webview"></a>添加代码，集成Webview</h3><ol>
<li><p>Crosswalk在安卓上需要一些权限。打开这些权限，需要修改<code>AndroidManifest.xml</code>文件， 在<code>&lt;application&gt;</code>元素上面添加权限。Crosswalk WebView最少需要如下权限去取渲染页面：</p>
<pre><code>&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;</code></pre><p>您可以添加其他权限，这取决您的应用开发需求。不过，只添加应用真正需要的权限，是一种公认的安全做法。</p>
<p><em>获取地理位置信息</em></p>
<pre><code>&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;</code></pre><p><em>获取照相机，摄像机以及麦克风</em></p>
<pre><code>&lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.MODIFY_AUDIO_SETTINGS&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;</code></pre><p><em>写数据到SD Card</em></p>
<pre><code>&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;</code></pre><p><em>保持CPU运行状态</em></p>
<pre><code>&lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;</code></pre></li>
<li><p>当生成application时，一些默认的布局资源会添加到工程中。用下面的内容替换主布局文件中的内容，<code>res/layout/activity_main.xml</code>：</p>
<pre><code>&lt;org.xwalk.core.XWalkView android:id=&quot;@+id/activity_main&quot;
  xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
  android:layout_width=&quot;fill_parent&quot;
  android:layout_height=&quot;fill_parent&quot;&gt;
&lt;/org.xwalk.core.XWalkView&gt;</code></pre><p>这将会用<code>XWalkView</code> (Crosswalk Webview)资源去替换应用默认的View。</p>
<p>您可以移除其他的文件，例如<code>res/layout/fragment_main.xml</code>，如果您不需要它。</p>
</li>
<li><p>修改<code>MainActivity</code>类 (通过<em>Package Explorer</em>， 在<code>src/org.crosswalkproject.xwalkembed/MainActivity.java</code>中找到它)。用下面的内容替换默认内容：</p>
<pre><code>package org.crosswalkproject.xwalkembed;

import org.xwalk.core.XWalkView;

import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity {
  private XWalkView mXWalkView;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mXWalkView = (XWalkView) findViewById(R.id.activity_main);
    mXWalkView.load(&quot;http://crosswalk-project.org/&quot;, null);
  }
}</code></pre><p><code>R.layout.activity_main</code>指的是您在<code>activity_main</code>里面定义的布局文件： 通过Embedding API暴露出来的Crosswalk runtime中Webview部分。Activity的主content view就被设置成了这个Webview。</p>
<p>上面的代码把布局模块设置成<code>XWalkView</code>，因此加载Web资源的方法就可以调用了。在这个例子中，调用了<code>load()</code>方法去加载Crosswalk官方网站并且在WebView模块中渲染该网页。请注意<code>loadAppFromManifest()</code>方法也是可以调用的，这个方法通过manifest文件加载Crosswalk应用。详情参见<a href="/apis/embeddingapidocs/reference/org/xwalk/core/XWalkView.html">Embedding API文档</a>。</p>
</li>
</ol>
<p>您现在可以运行应用了，像平常一样：右键点击<em>Package Explorer</em>中的工程，选择 <em>Run As</em> &gt; <em>Android Application</em>。</p>
<h3>在Crosswalk Webview中加载页面</h3><p>在之前的章节中，您在Webview中加载了一个页面，证明了Android应用可以&quot;加载&quot;网站。然而，如果你想让Web应用作为Android应用的一部分运行，而不是在网站上运行网页，那么，您可以在Crosswalk Webview中加载本地资源。</p>
<p>加载本地Web资源，您需要把Web文件添加到安卓应用里面作为应用包(<code>.apk</code>文件)的一部分。</p>
<p>参照下面步骤，添加Web资源并把它们和您的应用打包在一起：</p>
<ol>
<li><p>创建<code>assets/</code>目录。这是Android应用资源的标准路径，因此存放Web资源比较合适。</p>
</li>
<li><p>添加具有如下内容的<code>index.html</code>文件到<code>assets/</code>目录下：</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta name=&quot;viewport&quot;
          content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;title&gt;simple&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;hello world&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre></li>
<li><p>修改<code>MainActivity</code>类(<code>src/org.crosswalkproject.xwalkembed/MainActivity.java</code>)：</p>
<pre><code>package org.crosswalkproject.xwalkembed;

import org.xwalk.core.XWalkView;

import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity {
  private XWalkView mXWalkView;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mXWalkView = (XWalkView) findViewById(R.id.activity_main);

    // this loads a file from the assets/ directory
    mXWalkView.load(&quot;file:///android_asset/index.html&quot;, null);
  }
}</code></pre><p>这里主要的不同是传到<code>load()</code>方法中的参数是一个本地资源的URL，而不是一个远程的Web URL：</p>
<pre><code>mXWalkView.load(&quot;file:///android_asset/index.html&quot;, null);</code></pre><p>URL是以&quot;file:///android_asset/&quot;为前缀，后面添加上您需要加载的文件路径，路径名字是相对于<code>assets/</code>目录。</p>
<p>当首页HTML网页加载之后，网页中的其他URLs将会被当做标准的Web应用来处理，同时会把<code>assets/</code>目录作为应用的根目录。例如，如果在<code>assets/</code>目录下您有一个<code>page2.html</code>的网页，您可以用一个标准的超链接来链接到这个网页：</p>
<pre><code>&lt;a href=&quot;page2.html&quot;&gt;Page 2&lt;/a&gt;</code></pre><p>类似地，任何CSS或者媒体文件(音频，视频)文件都可以被添加到<code>assets/</code>目录并像平常那样使用，例如：</p>
<pre><code>&lt;!--
index.html文件中的音频标签指向文件
assets/audio/mytrack.ogg
--&gt;
&lt;audio src=&quot;audio/mytrack.ogg&quot;&gt;

/*
index.html中的CSS声明指向图片
assets/images/myimage.png
*/
.myclass {
  background-image: url(images/myimage.png);
}</code></pre></li>
</ol>
<h3>使用Proguard压缩APK文件 (可选)</h3><p>ProGuard是一个压缩、优化和混淆Java字节码文件的免费的工具。在生成您最终的APK文件时，这些选项是可选的。如果您针对您的Java代码编写了一些Proguard配置文件，那么或许您也想要添加一些Proguard规则来压缩Crosswalk库的大小： <a href="/documentation/samples/proguard-xwalk.txt">针对Crosswalk的Proguard规则</a>。</p>
<p>对Crosswalk使用Proguard的目的是压缩其大小而不是出于反编译的考虑。注意在Crosswalk中有很多直接把类名作为字符串处理的反射代码。因此压缩和混淆主要影响的是Chromium部分。 </p>
<h3 id="Debugging">调试</h3>

<p>调试运行在embedded Crosswalk Webview中的Web程序，请参照下面内容修改<code>MainActivity.java</code>文件：</p>
<pre><code>package org.crosswalkproject.xwalkembed;

import org.xwalk.core.XWalkPreferences;
import org.xwalk.core.XWalkView;

import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity {
  private XWalkView mXWalkView;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mXWalkView = (XWalkView) findViewById(R.id.activity_main);

    // turn on debugging
    XWalkPreferences.setValue(XWalkPreferences.REMOTE_DEBUGGING, true);

    mXWalkView.load(&quot;file:///android_asset/index.html&quot;, null);
  }
}</code></pre><p>关键的一行是：</p>
<pre><code>XWalkPreferences.setValue(XWalkPreferences.REMOTE_DEBUGGING, true);</code></pre><p><code>XWalkPreferences.setValue()</code>是为Crosswalk设置全局参数的；在这个例子中，您打开的是调试选项。</p>
<p>现在您可以正常安装并运行程序。对于远程调试，请参考<a href="/documentation/android/android_remote_debugging_zh.html">这个章节</a>。</p>
<h2>更多信息</h2><p>更多关于Embedding API的信息，请参考<a href="/documentation/apis/embedding_api_zh.html">Embedding API文档</a>。</p>
  <footer class="article-next">
    



  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
      
    
  


  </footer>
</article>

          
        </div>
      </div>
    </div>
    

    
 
  <hr class="footer-divider" style="margin-top:125px; margin-bottom:0px" />
    <div style="position:relative; top:-30px;">
       <a href="/"><img src="/assets/cw-logo-circle.png" width="60px" style="display:block; margin: 0 auto;" /></a>
    </div>
    <footer class="footer footer--documentation" >
      <div class="container" >
        <div class="row">
          <div  class="footer-div" language="en">
          <img src="/assets/Twitter_logo_blue.png" width="20px" /> Follow  <a href="http://twitter.com/xwalk_project">@xwalk_project on Twitter</a> for the latest developer activities and project updates.
          </div>
           <div  class="footer-div" language="zh" style="display:none">
           <img src="/assets/Sina_Weibo_Blue.png" width="60px" /> 参考<a href="http://weibo.com/crosswalk">微博</a> 最新的开发者活动或者更新。
          </div>
          <div class="footer-div">
             Latest blog post:</br>
              
              
                <b><a href="/blog">Crosswalk 23 to be the last Crosswalk release</a></b><br/>
                &nbsp;(<span ><time class="js-vagueTime" datetime="Fri, 10 Feb 2017 13:30:00 GMT">2017-02-10T09:30</time></span>)
              
              <br/>
           </div>
          <div class="footer-div">
              <strong><a href="/feed.xml"><img src="/assets/rss-icon-16.gif" style="vertical-align:middle" /> RSS Feed</a></strong>
          </div>
          <div class="footer-div">
             <a href="/documentation/getting_started_zh.html"> 文档</a> &nbsp;
             <a href="/blog/index_zh.html"> 博客</a> &nbsp;
             <a href="/documentation/downloads_zh.html"> 下载</a> <br />
             <a href="https://crosswalk-project.org/jira/secure/Dashboard.jspa"> 问题</a> &nbsp;
             <a href="https://github.com/crosswalk-project"> GitHub资源</a> &nbsp;
             <a href="/sitemap.html">Sitemap</a> <br/>
          </div>
        </div>
        <div class="row">
            <small>
              Crosswalk项目由Intel Open Source Technology Center开发。版权为 © 2013–2016 Intel Corporation。保留所有权利。 <a href="https://github.com/crosswalk-project/crosswalk-website/wiki/Privacy-Policy">  Privacy策略 </a>  *其他名称和商标可能被声明为他人财产
            </small>
        </div>
      </div>
    </footer>
<script>
    $("[language=en]").css("display","none");
    $("[language=zh]").css("display","block");
</script>

    
    
      <!-- Google Tag Manager -->
      <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-WC843Q"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-WC843Q');</script>
      <!-- End Google Tag Manager -->
    
    <script src="/js/smoothScroll.js"></script>
    <script src="/js/vagueTime.js"></script>
    <!-- <script async defer src="/js/trmix.js"></script> -->
  </body>
</html>
